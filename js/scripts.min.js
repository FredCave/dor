var Space={container:"",scene:"",camera:"",renderer:"",controls:"",cube:"",clock:new THREE.Clock,init:function(){console.log("Space.init")},animate:function(){console.log("Space.animate")},update:function(){console.log("Space.update")},render:function(){console.log("Space.render")}},Space={container:"",scene:"",camera:"",renderer:"",controls:"",cube:"",clock:new THREE.Clock,cubeIndex:0,init:function(){console.log("Space.init"),this.scene=new THREE.Scene;var a=window.innerWidth,b=window.innerHeight,c=45,d=a/b,e=.1,f=2e4;this.camera=new THREE.PerspectiveCamera(c,d,e,f),this.scene.add(this.camera),this.camera.position.set(0,150,400),this.camera.lookAt(this.scene.position),Detector.webgl?this.renderer=new THREE.WebGLRenderer({antialias:!0}):this.renderer=new THREE.CanvasRenderer,this.renderer.setSize(a,b),this.container=document.getElementById("space"),this.container.appendChild(this.renderer.domElement),THREEx.WindowResize(this.renderer,this.camera),this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement);var g=new THREE.AxisHelper(100);this.scene.add(g),this.generateCube()},animate:function(){var a=this;setTimeout(function(){requestAnimationFrame(function(){a.animate()})},1e3/24),this.render(),this.update()},update:function(){this.controls.update()},render:function(){this.renderer.render(this.scene,this.camera)},generateCube:function(){console.log("Space.generateCube");var a=this,b=Page.cubeData[this.cubeIndex];for(Page.addCubeButtons(),_.each(b,function(b){a.generateLayer(b)}),this.cubeIndex++;this.cubeIndex<6;)this.generateCube()},generateLayer:function(a){console.log("Space.generateLayer"),console.log(121,a);var b=5e3,c=!0,d=[];for(var e in a)a.hasOwnProperty(e)&&(a[e]===!1?(c=!1,console.log(135,"Data Incomplete")):d.push(a[e].url));if(c){for(var f=new THREE.CubeGeometry(b,b,b),g=[],h=0;h<6;h++)g.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(d[h]),side:THREE.BackSide,transparent:!0}));var i=new THREE.MeshFaceMaterial(g),j=new THREE.Mesh(f,i);this.scene.add(j),Page.addLayerButton()}}},Page={cubeButtonsIndex:1,cubeIndex:0,layerNo:1,init:function(){console.log("Page.init"),this.bindEvents(),this.loadCubeData()},bindEvents:function(){console.log("Page.bindEvents"),$("#buttons").on("click",".button",function(){$(this).hasClass("off")?($(this).removeClass("off"),Space.showLayer($(this).attr("id"))):($(this).addClass("off"),Space.hideLayer($(this).attr("id")))}),$("#buttons").on("click","label",function(){$(this).hasClass("off")?($(this).removeClass("off").siblings(".button").removeClass("off"),Space.showCube($(this).text())):($(this).addClass("off").siblings(".button").addClass("off"),Space.hideCube($(this).text()))}),$("#buttons_toggle").on("click",function(){$(this).hasClass("off")?($(this).text("Hide Controls").removeClass("off"),$("#buttons").show()):($(this).text("Show Controls").addClass("off"),$("#buttons").hide()),Space.toggleAxes()}),$("#buttons").on("mouseover","label",function(a){$("#tooltip").text("Toggle All").css({top:a.clientY+12,left:a.clientX+12,display:"inline-block"})}),$("#buttons").on("mouseover",".button",function(a){var b=$(this).attr("data-name");$("#tooltip").text(b).css({top:a.clientY+12,left:a.clientX+12,display:"inline-block"})}),$("#buttons").on("mouseover",".cube_control",function(a){var b;$(this).hasClass("cube_opacity")?b="Opacity":$(this).hasClass("cube_size")&&(b="Size"),$("#tooltip").text(b).css({top:a.clientY+12,left:a.clientX+12,display:"inline-block"})}),$("#buttons").on("mouseout","div, label",function(a){$("#tooltip").text("").css({top:"",left:"",display:""})})},addCubeButtons:function(){console.log("Page.addCubeButtons");var a=String.fromCharCode(64+this.cubeButtonsIndex);$("#buttons").append("<li data-letter='"+a+"'><label>"+a+"</label></li>"),this.cubeButtonsIndex++,this.layerNo=1},addLayerButton:function(a){console.log("Page.addLayerButton");var b=$("#buttons li:last-child");b.append("<div class='button off' data-name='"+a+"' id='"+b.data("letter")+this.layerNo+"'>"+this.layerNo+"</div>"),this.layerNo++},addControls:function(){console.log("Page.addControls");var a=$("#buttons li:last-child");a.append("<div class='cube_control cube_opacity'></div><div class='cube_control cube_size'></div>")},loadCubeData:function(){console.log("Page.loadCubeData");var a=this;$.get(ROOT+"/wp-json/custom/v1/cubes",function(b){a.cubeData=b,a.cubeDataLoaded()}).fail(function(){console.log("Ajax error. Cube not loaded.")})},cubeDataLoaded:function(){console.log("Page.cubeDataLoaded"),Space.init(),Space.animate()},controlsInit:function(){console.log("Page.controlsInit");var a=this;$(".cube_opacity").slider({min:0,max:100,value:100,slide:function(b,c){a.opacitySlide(b,c)},stop:function(b,c){a.opacitySlideStop(b,c)}}),$(".cube_size").slider({min:500,max:2e4,value:5e3,slide:function(b,c){a.sizeSlide(b,c)},stop:function(b,c){a.sizeSlideStop(b,c)}})},opacitySlide:function(a,b){console.log("Page.opacitySlide");var c=b.value;$("#tooltip").text(c).css({top:a.clientY+12,left:a.clientX+12,display:"inline-block"})},sizeSlide:function(a,b){console.log("Page.sizeSlide");var c=b.value;$("#tooltip").text(c).css({top:a.clientY+12,left:a.clientX+12,display:"inline-block"})},opacitySlideStop:function(a,b){console.log("Page.opacitySlideStop");var c=$(a.target).parents("li").attr("data-letter");Space.changeOpacity(c,b.value/100)},sizeSlideStop:function(a,b){console.log("Page.sizeSlideStop");var c=$(a.target).parents("li").attr("data-letter");Space.changeSize(c,b.value)}};$(document).on("ready",function(){Page.init()});var Space={container:"",scene:"",camera:"",renderer:"",controls:"",cube:"",clock:new THREE.Clock,cubeIndex:0,axesVisible:!0,init:function(){console.log("Space.init"),this.scene=new THREE.Scene;var a=window.innerWidth,b=window.innerHeight,c=45,d=a/b,e=.1,f=2e4;this.camera=new THREE.PerspectiveCamera(c,d,e,f),this.scene.add(this.camera),this.camera.position.set(0,150,400),this.camera.lookAt(this.scene.position),Detector.webgl?this.renderer=new THREE.WebGLRenderer({antialias:!0}):this.renderer=new THREE.CanvasRenderer,this.renderer.setSize(a,b),this.container=document.getElementById("space"),this.container.appendChild(this.renderer.domElement),THREEx.WindowResize(this.renderer,this.camera),this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement);var g=new THREE.AxisHelper(100);g.name="axes",this.scene.add(g),this.generateCube()},animate:function(){var a=this;setTimeout(function(){requestAnimationFrame(function(){a.animate()})},1e3/24),this.render(),this.update()},update:function(){this.controls.update()},render:function(){this.renderer.render(this.scene,this.camera)},generateCube:function(){console.log("Space.generateCube");var a=this,b=Page.cubeData[this.cubeIndex];Page.addCubeButtons();var c=1;_.each(b,function(b){a.generateLayer(b,c),c++}),Page.addControls(),this.cubeIndex++,this.cubeIndex<6?this.generateCube():6===this.cubeIndex&&Page.controlsInit()},generateLayer:function(a,b){console.log("Space.generateLayer");var c,d=5e3,e=!0,f=[];for(var g in a)a.hasOwnProperty(g)&&(a[g]===!1?(e=!1,console.log(135,"Data Incomplete")):"name"===g?c=a[g]:f.push(a[g].url));if(e){for(var h=new THREE.CubeGeometry(d,d,d),i=[],j=0;j<6;j++)i.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(f[j]),side:THREE.BackSide,transparent:!0,opacity:0}));var k=new THREE.MeshFaceMaterial(i),l=new THREE.Mesh(h,k);l.name=String.fromCharCode(65+this.cubeIndex)+b,this.scene.add(l),Page.addLayerButton(c)}},hideLayer:function(a){console.log("Space.hideLayer",a);var b=this.scene.getObjectByName(a);_.each(b.material.materials,function(a){a.opacity=0})},showLayer:function(a){console.log("Space.showLayer",a);var b=this.scene.getObjectByName(a);_.each(b.material.materials,function(a){a.opacity=1})},hideCube:function(a){console.log("Space.hideCube",a);var b=this.scene.children;_.each(b,function(b){console.log(222,b),b.name.indexOf(a)>-1&&_.each(b.material.materials,function(a){a.opacity=0})})},showCube:function(a){console.log("Space.showCube",a);var b=this.scene.children;_.each(b,function(b){b.name.indexOf(a)>-1&&_.each(b.material.materials,function(a){a.opacity=1})})},toggleAxes:function(){console.log("Space.toggleAxes");var a=this.scene.getObjectByName("axes");this.axesVisible?(a.visible=!1,this.axesVisible=!1):(a.visible=!0,this.axesVisible=!0)},changeOpacity:function(a,b){console.log("Space.changeOpacity",a,b);var c=this.scene.children;_.each(c,function(c){c.name.indexOf(a)>-1&&_.each(c.material.materials,function(a){b>0&&a.opacity>0&&(a.opacity=b)})})},changeSize:function(a){console.log("Space.changeSize",a)}};